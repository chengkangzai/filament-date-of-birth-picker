document.addEventListener("alpine:init",()=>{Alpine.data("dateOfBirthPicker",()=>({day:null,month:null,year:null,startYear:1920,endYear:new Date().getFullYear(),statePath:null,_cachedYears:null,_cachedMonths:null,monthLabels:null,minDate:null,maxDate:null,init(){this._cacheYears(),this._cacheMonths(),this.$watch("day",()=>this.updateWireModel()),this.$watch("month",()=>{this.updateDaysInMonth(),this.updateWireModel()}),this.$watch("year",()=>{this.updateDaysInMonth(),this.updateWireModel()}),this.$watch("startYear",()=>this._cacheYears()),this.$watch("endYear",()=>this._cacheYears())},_cacheYears(){this._cachedYears=[];for(let t=this.endYear;t>=this.startYear;t--)this._cachedYears.push(t)},_cacheMonths(){this.monthLabels&&Array.isArray(this.monthLabels)?this._cachedMonths=this.monthLabels:this._cachedMonths=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}]},updateWireModel(){this.$wire&&this.statePath&&this.$wire.set(this.statePath,{day:this.day,month:this.month,year:this.year})},updateDaysInMonth(){if(!this.month||!this.year)return;let t=new Date(this.year,this.month,0).getDate();this.day>t&&(this.day=null)},getDaysInMonth(){return!this.month||!this.year?31:new Date(this.year,this.month,0).getDate()},isValidDate(){if(!this.day||!this.month||!this.year)return!1;try{let t=parseInt(this.year,10),a=parseInt(this.month,10),e=parseInt(this.day,10);if(isNaN(t)||isNaN(a)||isNaN(e))return!1;let s=new Date(t,a-1,e);return s.getFullYear()===t&&s.getMonth()===a-1&&s.getDate()===e}catch{return!1}},getYears(){return this._cachedYears||[]},getMonths(){return this._cachedMonths||[]},getDays(){let t=[],a=this.getDaysInMonth();for(let e=1;e<=a;e++)t.push(e);return t},handleKeyDown(t,a){let{key:e}=t;(e==="ArrowDown"||e==="ArrowUp")&&(t.preventDefault(),this.navigateValue(a,e==="ArrowDown"?1:-1))},navigateValue(t,a){switch(t){case"day":this.navigateDay(a);break;case"month":this.navigateMonth(a);break;case"year":this.navigateYear(a);break}},navigateDay(t){let a=this.getDaysInMonth(),s=(this.day||0)+t;s<1&&(s=a),s>a&&(s=1),this.day=s},navigateMonth(t){let e=(this.month||0)+t;e<1&&(e=12),e>12&&(e=1),this.month=e},navigateYear(t){let e=(this.year||this.endYear)+t;e<this.startYear&&(e=this.endYear),e>this.endYear&&(e=this.startYear),this.year=e}}))});
